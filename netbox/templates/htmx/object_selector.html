{% load form_helpers %}

<div class="modal-header">
  <h5 class="modal-title">Select {{ model|meta:"verbose_name"|bettertitle }}</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body row">
  <div class="col-3">
    <ul class="nav nav-pills flex-column">
      {% for field in form.visible_fields %}
        <li class="nav-item">
          <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#selector{{ forloop.counter }}">{{ field.label }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-9">
    <form hx-get="{% url 'htmx_object_selector' %}?_model={{ model|meta:"label_lower" }}" hx-target="#selector_results">
      <div class="tab-content p-1">
        {% for field in form.visible_fields %}
          <div class="collapse{% if forloop.first %} show{% endif %}" id="selector{{ forloop.counter }}">{% render_field field %}</div>
        {% endfor %}
      </div>
      <div class="text-end">
        <button type="submit" name="_search" value="true" class="btn btn-sm btn-primary">Submit</button>
      </div>
    </form>
    <div id="selector_results" class="mt-3" data-selector-target="{{ target_id }}"></div>
  </div>
</div>
