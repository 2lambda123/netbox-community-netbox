{% extends '_base.html' %}
{% load form_helpers %}

{% block title %}Add a new comment{% endblock %}

{% block content %}
    <form action="" method="post" enctype="multipart/form-data" class="form form-horizontal">
        {% csrf_token %}
        {% for field in form.hidden_fields %}
            {{ field }}
        {% endfor %}
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <h3>Add a new comment</h3>
                {% block tabs %}{% endblock %}
                {% if form.non_field_errors %}
                    <div class="panel panel-danger">
                        <div class="panel-heading"><strong>Errors</strong></div>
                        <div class="panel-body">
                            {{ form.non_field_errors }}
                        </div>
                    </div>
                {% endif %}
                {% block form %}
                    <div class="panel panel-default">
                        <div class="panel-heading"><strong>Comment</strong></div>
                        <div class="panel-body">

                          <!-- Hide all fields except the comment body-->
                          <style>
                            .form-group > div.col-md-9, .form-group > label {
                              height: 0;
                              padding: 0;
                              margin: 0;
                              overflow: hidden;
                              visibility: hidden;
                            }
                          </style>

                          {% render_form form %}

                            <!-- Pre-filled hidden fields -->

                            <div class="form-group">
                              <label class="col-md-3 control-label required" for="id_for_device">for_device</label>
                              <div class="col-md-9">
                                <select name="for_device" required="" class="form-control" id="id_for_device" placeholder="for_device">
                                  <option value="{{ for_device }}" selected=""></option>
                                </select>
                              </div>
                            </div>


                            <div class="form-group">
                              <label class="col-md-3 control-label required" for="id_created_by">Created by</label>
                              <div class="col-md-9">
                                <select name="created_by" required="" placeholder="Created by" class="form-control" id="id_created_by">
                                    <option value="{{ user.pk }}" selected></option>
                                </select>
                              </div>
                            </div>

                            <!-- End of pre-filled hidden fields -->

                        </div>
                    </div>
                {% endblock %}
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-3 text-right">
                {% block buttons %}
                    {% if obj.pk %}
                        <button type="submit" name="_update" class="btn btn-primary">Update</button>
                    {% else %}
                        <button type="submit" name="_create" class="btn btn-primary">Create</button>
                    {% endif %}
                    <a href="{{ return_url }}" class="btn btn-default">Cancel</a>
                {% endblock %}
            </div>
        </div>
    </form>
{% endblock %}
